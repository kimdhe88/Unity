customProfileHome=${HOME}/.custom_profiles
customConfig=${HOME}/.custom_profiles/.custom_profiles.cfg
toolsPath=${customProfileHome}/.tools
source ${toolsPath}

init(){
  profileName=${1}
  if [ -z "${profileName}" ]; then
    error_print "Enter the profile name you want to disable."
    return ${error}
  fi

  return ${success}
}

disableProfile(){

  cfgLineNumber=`awk -F"=" '{if($1=="'${profileName}'"){print NR}}' ${customConfig}`
  if [ -z "${cfgLineNumber}" ];then
    warnning_print "[${profileName}] is not found"
    return ${error}
  else
    sed -i "${cfgLineNumber}s/enable/disable/g" ${customConfig}
  fi

  if [ "$(get_config_info ${profileName} ${customConfig})" != "disable" ];then
    error_print "${profileName} profile disable failed."
    return ${error}
  fi

  return ${success}
}

main(){
   function_call init ${1}
   function_call disableProfile

   echo ""
   echo "* [${profileName}] profile has been disabled."
   echo "* Please reconnect the shell to apply the profile."
   echo ""
}

main ${1}
