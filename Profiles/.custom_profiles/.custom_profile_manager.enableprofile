customProfileHome=${HOME}/.custom_profiles
customConfig=${HOME}/.custom_profiles/.custom_profiles.cfg
toolsPath=${customProfileHome}/.tools
source ${toolsPath}

init(){
  profileName=${1}
  if [ -z "${profileName}" ]; then
    error_print "Enter the profile name you want to enable."
    return ${error}
  fi

  return ${success}
}

enableProfile(){
  profileLine=`awk -F"=" '{if($1=="'${profileName}'"){print NR}}' ${customConfig}`
  if [ -z "${profileLine}" ];then
    warnning_print "[${profileName}] is not found"
    return ${error}
  else
    sed -i "${profileLine}s/disable/enable/g" ${customConfig}
  fi

  if [ "$(get_config_info ${profileName} ${customConfig})" != "enable" ];then
    error_print "${profileName} profile enable failed."
    return ${error}
  fi

  return ${success}
}

main(){
   function_call init ${1}
   function_call enableProfile

   echo ""
   echo "* [${profileName}] profile has been enabled."
   echo "* Please reconnect the shell to apply the profile."
   echo ""
}

main ${1}
